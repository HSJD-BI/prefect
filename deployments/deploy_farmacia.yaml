name: farmacia
prefect-version: 3.6.11

pull:
  - prefect.deployments.steps.git_clone:
      id: clone-step
      repository: https://github.com/HSJD-BI/update-precios-farmacia.git
      branch: "{{ prefect.variables.deployment_branch }}"
      credentials: "{{ prefect.blocks.github-credentials.bi-github }}"  
  - prefect.deployments.steps.run_shell_script:
      script: uv pip install -r requirements.txt
      stream_output: true
      directory: "{{ clone-step.directory }}"

deployments:
  - name: deploy-carga-items-farmacia
    descripcion: ""
    flow_name: carga-items-farmacia
    entrypoint: flows/flow_carga_items.py:carga_items_farmacia
    work_pool:
      name: "vm-farmacia"
      job_variables:
        env:
          USUARIO_TS: "DEMO"
          PASSWORD_TS: "TEST"
    schedules:
      - cron: "0 0 * * *"
        timezone: "America/Buenos_Aires"
        active: true
  - name: deploy-scrapping-farmacia
    descripcion: ""
    flow_name: scrapping-carga-precios
    entrypoint: flows/flow_scrapping.py:scrapping_carga_precios
    work_pool:
      name: "vm-farmacia"
      job_variables:
        env:
          USUARIO_TS: "DEMO"
          PASSWORD_TS: "TEST"
    schedules:
      - cron: "15 0 * * *"
        timezone: "America/Buenos_Aires"
        active: true